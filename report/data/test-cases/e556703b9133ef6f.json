{"uid":"e556703b9133ef6f","name":"test_002_oa[case0]","fullName":"test_case.jnt_inter_case.jnt_app.test_debug.TestDebug#test_002_oa","historyId":"d3e997dfb85d9105e6d6ec59f7f6a883","time":{"start":1709630524387,"stop":1709630524742,"duration":355},"status":"failed","statusMessage":"AssertionError","statusTrace":"self = <pytest_demo.test_case.jnt_inter_case.jnt_app.test_debug.TestDebug object at 0x000002917F896CA0>\ncase = {'Comment': '', 'ID': 'draft_01_c1', 'advice': '', 'case_description': '草稿箱_有撤回付款流程', ...}\n\n    @allure.step('调试_OA')\n    @pytest.mark.debug\n    # @pytest.mark.parametrize()第一个参数为逗号分隔的字符串列表，第二个参数是值列表parametrize()\n    @pytest.mark.parametrize('case', excel.get_excel_data(\"debug\", \"OA\"))\n    def test_002_oa(self, case):\n        self.d_time.write_time_to_json()\n>       self.new.test_case_method(case)\n\ntest_case\\jnt_inter_case\\jnt_app\\test_debug.py:39: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\ncommon\\data_deal.py:245: in test_case_method\n    self.test.assert_common(response['code'], response['body'], expect, response['time_consuming'])\ncommon\\asert.py:141: in assert_common\n    assert self.assert_in_text(res_body, res_expect)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <common.asert.Asert object at 0x000002912DF1C3D0>\nbody = {'data': {'list': [{'createTime': 1709630430000, 'creator': '1115', 'deleted': False, 'formConf': '{\"type\":\"page\",\"nam...oolbar\":[],\"aside\":[],\"regions\":[\"body\"],\"id\":\"u:935b03fecc59\"}', ...}], 'total': 1}, 'message': '操作成功', 'status': 200}\nexpected_msg = '测试请假_AT_AT-自动化_2024-03-05'\n\n    def assert_in_text(self, body, expected_msg):\n        \"\"\"\n        验证接口response body中是否包含预期字符串\n        :param body:\n        :param expected_msg:\n        :return:\n        \"\"\"\n        try:\n            text = json.dumps(body, ensure_ascii=False)         # 将body序列化为JSON格式的str\n>           assert expected_msg in text\nE           AssertionError\n\ncommon\\asert.py:66: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"init_connect","time":{"start":1709630524387,"stop":1709630524387,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"hasContent":false,"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0}],"testStage":{"status":"failed","statusMessage":"AssertionError","statusTrace":"self = <pytest_demo.test_case.jnt_inter_case.jnt_app.test_debug.TestDebug object at 0x000002917F896CA0>\ncase = {'Comment': '', 'ID': 'draft_01_c1', 'advice': '', 'case_description': '草稿箱_有撤回付款流程', ...}\n\n    @allure.step('调试_OA')\n    @pytest.mark.debug\n    # @pytest.mark.parametrize()第一个参数为逗号分隔的字符串列表，第二个参数是值列表parametrize()\n    @pytest.mark.parametrize('case', excel.get_excel_data(\"debug\", \"OA\"))\n    def test_002_oa(self, case):\n        self.d_time.write_time_to_json()\n>       self.new.test_case_method(case)\n\ntest_case\\jnt_inter_case\\jnt_app\\test_debug.py:39: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\ncommon\\data_deal.py:245: in test_case_method\n    self.test.assert_common(response['code'], response['body'], expect, response['time_consuming'])\ncommon\\asert.py:141: in assert_common\n    assert self.assert_in_text(res_body, res_expect)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <common.asert.Asert object at 0x000002912DF1C3D0>\nbody = {'data': {'list': [{'createTime': 1709630430000, 'creator': '1115', 'deleted': False, 'formConf': '{\"type\":\"page\",\"nam...oolbar\":[],\"aside\":[],\"regions\":[\"body\"],\"id\":\"u:935b03fecc59\"}', ...}], 'total': 1}, 'message': '操作成功', 'status': 200}\nexpected_msg = '测试请假_AT_AT-自动化_2024-03-05'\n\n    def assert_in_text(self, body, expected_msg):\n        \"\"\"\n        验证接口response body中是否包含预期字符串\n        :param body:\n        :param expected_msg:\n        :return:\n        \"\"\"\n        try:\n            text = json.dumps(body, ensure_ascii=False)         # 将body序列化为JSON格式的str\n>           assert expected_msg in text\nE           AssertionError\n\ncommon\\asert.py:66: AssertionError","steps":[{"name":"调试_OA","time":{"start":1709630524388,"stop":1709630524741,"duration":353},"status":"failed","statusMessage":"AssertionError\n","statusTrace":"  File \"D:\\Program Files\\Python\\Python39\\lib\\site-packages\\allure_commons\\_allure.py\", line 192, in impl\n    return func(*a, **kw)\n  File \"D:\\Scripts\\python_code\\pytest_demo\\test_case\\jnt_inter_case\\jnt_app\\test_debug.py\", line 39, in test_002_oa\n    self.new.test_case_method(case)\n  File \"D:\\Scripts\\python_code\\pytest_demo\\common\\data_deal.py\", line 245, in test_case_method\n    self.test.assert_common(response['code'], response['body'], expect, response['time_consuming'])\n  File \"D:\\Scripts\\python_code\\pytest_demo\\common\\asert.py\", line 141, in assert_common\n    assert self.assert_in_text(res_body, res_expect)\n  File \"D:\\Scripts\\python_code\\pytest_demo\\common\\asert.py\", line 66, in assert_in_text\n    assert expected_msg in text\n","steps":[],"attachments":[],"parameters":[{"name":"case","value":"{'ID': 'draft_01_c1', 'case_description': '草稿箱_有撤回付款流程', 'module': 'OA', 'envir': 'jnt_app_dev', 'pre_case': '', 'request_mode': 'get', 'case_url': '/oa/admin-api/bpm/saveInstance/my-page?pageNo=1&pageSize=10', 'case_header': '{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer j::oa_token\"}', 'case_global_var': '/data/list/0/saveId', 'upload_files': '', 'case_preset': '', 'case_params': '', 'case_expect': '测试请假_AT_AT-自动化_j::cur_date', 'Comment': '', 'advice': ''}"}],"attachmentStep":false,"hasContent":true,"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0}],"attachments":[{"uid":"96dbbc476940ea70","name":"log","source":"96dbbc476940ea70.txt","type":"text/plain","size":154}],"parameters":[],"attachmentStep":false,"hasContent":true,"stepsCount":1,"shouldDisplayMessage":true,"attachmentsCount":1},"afterStages":[{"name":"init_connect::0","time":{"start":1709630524839,"stop":1709630524840,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"hasContent":false,"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0}],"labels":[{"name":"feature","value":"调试demo"},{"name":"tag","value":"debug"},{"name":"parentSuite","value":"test_case.jnt_inter_case.jnt_app"},{"name":"suite","value":"test_debug"},{"name":"subSuite","value":"TestDebug"},{"name":"host","value":"WIN-DVMNCVL70K8"},{"name":"thread","value":"21272-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"test_case.jnt_inter_case.jnt_app.test_debug"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"case","value":"{'ID': 'draft_01_c1', 'case_description': '草稿箱_有撤回付款流程', 'module': 'OA', 'envir': 'jnt_app_dev', 'pre_case': '', 'request_mode': 'get', 'case_url': '/oa/admin-api/bpm/saveInstance/my-page?pageNo=1&pageSize=10', 'case_header': '{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer j::oa_token\"}', 'case_global_var': '/data/list/0/saveId', 'upload_files': '', 'case_preset': '', 'case_params': '', 'case_expect': '测试请假_AT_AT-自动化_j::cur_date', 'Comment': '', 'advice': ''}"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["debug"]},"source":"e556703b9133ef6f.json","parameterValues":["{'ID': 'draft_01_c1', 'case_description': '草稿箱_有撤回付款流程', 'module': 'OA', 'envir': 'jnt_app_dev', 'pre_case': '', 'request_mode': 'get', 'case_url': '/oa/admin-api/bpm/saveInstance/my-page?pageNo=1&pageSize=10', 'case_header': '{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer j::oa_token\"}', 'case_global_var': '/data/list/0/saveId', 'upload_files': '', 'case_preset': '', 'case_params': '', 'case_expect': '测试请假_AT_AT-自动化_j::cur_date', 'Comment': '', 'advice': ''}"]}